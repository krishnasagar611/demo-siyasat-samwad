"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6777],{26777:function(e,n,t){t.r(n),t.d(n,{default:function(){return b}});var a=t(85893),r=t(98695),i=t(51437),o=t(67294),s=function(e){return"object"==typeof e&&null!==e},l=function(e){var n=e.value,t=void 0===n?"":n,a=e.numInputs,r=void 0===a?4:a,i=e.onChange,l=e.onPaste,c=e.renderInput,u=e.shouldAutoFocus,d=void 0!==u&&u,f=e.inputType,p=void 0===f?"text":f,v=e.renderSeparator,h=e.placeholder,m=e.containerStyle,g=e.inputStyle,b=e.skipDefaultStyles,y=void 0!==b&&b,x=o.useState(0),w=x[0],j=x[1],N=o.useRef([]),P=function(){return t?t.toString().split(""):[]},I="number"===p||"tel"===p;o.useEffect(function(){N.current=N.current.slice(0,r)},[r]),o.useEffect(function(){var e;d&&(null===(e=N.current[0])||void 0===e||e.focus())},[d]);var k=function(){if("string"==typeof h){if(h.length===r)return h;h.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},D=function(e){return(I?!isNaN(Number(e)):"string"==typeof e)&&1===e.trim().length},S=function(e){var n=e.target.value;D(n)&&(_(n),T(w+1))},Z=function(e){var n=e.nativeEvent,t=e.target.value;D(t)||(t.length!==r||t.split("").some(function(e){return!D(e)})||(A(t.split("")),T(r-1)),null===n.data&&"deleteContentBackward"===n.inputType&&(e.preventDefault(),_(""),T(w-1)),e.target.value="")},E=function(){j(w-1)},C=function(e){var n=P();[e.code,e.key].includes("Backspace")?(e.preventDefault(),_(""),T(w-1)):"Delete"===e.code?(e.preventDefault(),_("")):"ArrowLeft"===e.code?(e.preventDefault(),T(w-1)):"ArrowRight"===e.code?(e.preventDefault(),T(w+1)):e.key===n[w]?(e.preventDefault(),T(w+1)):("Spacebar"===e.code||"Space"===e.code||"ArrowUp"===e.code||"ArrowDown"===e.code)&&e.preventDefault()},T=function(e){var n,t,a=Math.max(Math.min(r-1,e),0);N.current[a]&&(null===(n=N.current[a])||void 0===n||n.focus(),null===(t=N.current[a])||void 0===t||t.select(),j(a))},_=function(e){var n=P();n[w]=e[0],A(n)},A=function(e){i(e.join(""))},M=function(e){e.preventDefault();var n,t=P(),a=w,i=e.clipboardData.getData("text/plain").slice(0,r-w).split("");if(!(I&&i.some(function(e){return isNaN(Number(e))}))){for(var o=0;o<r;++o)o>=w&&i.length>0&&(t[o]=null!==(n=i.shift())&&void 0!==n?n:"",a++);T(a),A(t)}};return o.createElement("div",{style:Object.assign({display:"flex",alignItems:"center"},s(m)&&m),className:"string"==typeof m?m:void 0,onPaste:l},Array.from({length:r},function(e,n){return n}).map(function(e){var n,t,a;return o.createElement(o.Fragment,{key:e},c({value:null!==(n=P()[e])&&void 0!==n?n:"",placeholder:null!==(a=null===(t=k())||void 0===t?void 0:t[e])&&void 0!==a?a:void 0,ref:function(n){return N.current[e]=n},onChange:S,onFocus:function(n){j(e),n.target.select()},onBlur:E,onKeyDown:C,onPaste:M,autoComplete:"off","aria-label":"Please enter OTP character ".concat(e+1),style:Object.assign(y?{}:{width:"1em",textAlign:"center"},s(g)?g:{}),className:"string"==typeof g?g:void 0,type:p,inputMode:I?"numeric":"text",onInput:Z},e),e<r-1&&("function"==typeof v?v(e):v))}))},c=t(73680),u=t(71919),d=t(56467),f=t(30109),p=t(9473),v=t(81426),h=t(39332),m=t(86501),g=t(30188),b=e=>{var n;let[t,s]=(0,o.useState)(""),{authentication:b}=(0,u.Z)(),y=(0,p.v9)(v.zd),x=y&&y.lat,w=y&&y.long,j=(0,h.useRouter)(),N=(0,p.v9)(v.vV),[P,I]=(0,o.useState)(60);(0,o.useEffect)(()=>{let e;return P>0&&(e=setInterval(()=>{I(e=>e-1)},1e3)),()=>{clearInterval(e)}},[P]);let k=n=>{n.preventDefault(),null!==e.phonenum&&(S(e.phonenum),I(60))},D=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new d.lI("recaptcha-container",{size:"invisible",callback:e=>{}},b))};(0,o.useEffect)(()=>{D()},[]);let S=async e=>{D();let n=window.recaptchaVerifier;await (0,d.$g)(b,e,n).then(e=>{window.confirmationResult=e,m.ZP.success("OTP Send Successfully"),(0,f.y9)(!0)}).catch(e=>{let n="";switch(e.code){case"auth/too-many-requests":n="Too many requests. Please try again later.";break;case"auth/invalid-phone-number":n="Invalid phone number. Please enter a valid phone number.";break;default:n="An error occurred. Please try again."}m.ZP.error(n)})};(0,o.useEffect)(()=>{null!==e.phonenum&&S(e.phonenum)},[e.phonenum]);let Z=e=>{switch(e){case"auth/missing-verification-code":m.ZP.error("Missing verification code. Please enter the code.");break;case"auth/code-expired":m.ZP.error("The verification code has expired. Please generate a new one.");break;case"auth/invalid-verification-code":m.ZP.error("Invalid verification code. Please enter a valid code.");break;case"auth/invalid-verification-id":m.ZP.error("Invalid verification ID. Please try again with a valid ID.");break;case"auth/session-expired":m.ZP.error("The session has expired. Please sign in again.");break;case"auth/quota-exceeded":m.ZP.error("Quota exceeded. Please wait before sending a new verification code.");break;default:m.ZP.error("An unknown authentication error occurred.")}},E=async n=>{n.preventDefault();let a=window.confirmationResult;try{let n=await a.confirm(t);e.setIsLogout(!0),e.onHide(),(0,f.z2)({firebase_id:n.user.uid,mobile:n.user.phoneNumber,type:"mobile",status:"1",fcm_id:y.fcmtoken,onSuccess:n=>{setTimeout(async()=>{await (0,g.je)({token:n.data.fcm_id,latitude:x,longitude:w,onSuccess:async e=>{},onError:async e=>{console.log(e)}})},[1e3]),m.ZP.success("Login Successfully"),"0"===n.data.is_login&&j.push("/profile-update"),e.setisloginloading(!1)},onError:e=>{m.ZP.error((0,c.Iu)("deactiveMsg"))}})}catch(e){Z(e.code)}},C=async()=>{let e=document.getElementById("recaptcha-container");if(e&&(e.innerHTML=""),window.recaptchaVerifier){var n,t,a;null===(a=window)||void 0===a||null===(t=a.recaptchaVerifier)||void 0===t||null===(n=t.recaptcha)||void 0===n||n.reset()}},T=async()=>{e.onHide(),e.setisloginloading(!1),await C(),e.setPhonenum(null),e.setValue(null)};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)(r.Z,{...e,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0,dialogClassName:"border-radius-2",onHide:T,children:(0,a.jsxs)("div",{className:"ModalWrapper55",id:"ModalWrapper",children:[(0,a.jsxs)("div",{style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"20px"},id:"login_img5",children:[(0,a.jsx)("img",{className:"ModalImg5",src:i.Z.src,alt:"otp modal image"}),(0,a.jsx)("div",{className:"logo-img-overlay",children:(0,a.jsx)("img",{src:N&&(null==N?void 0:null===(n=N.web_setting)||void 0===n?void 0:n.web_header_logo),alt:"logo image",id:"logo5"})})]}),(0,a.jsxs)("div",{id:"modal-content",children:[(0,a.jsx)(r.Z.Header,{closeButton:!0,children:(0,a.jsx)(r.Z.Title,{id:"contained-modal-title-vcenter",children:(0,c.Iu)("opt-verify")})}),(0,a.jsx)(r.Z.Body,{children:(0,a.jsxs)("div",{className:"AC",children:[(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("h5",{className:"forgotText",children:(0,a.jsxs)("strong",{children:[(0,c.Iu)("otp-sent")," "]})}),(0,a.jsxs)("div",{className:"welcomeText",children:[" ",e.phonenum," "]})]}),(0,a.jsxs)("div",{className:"mb-3 my-3 otp-content",children:[(0,a.jsx)(l,{className:"otp-container",value:t,onChange:s,autoFocus:!0,numInputs:6,disabled:!1,containerStyle:"otpbox",renderSeparator:(0,a.jsx)("span",{className:"space"}),renderInput:e=>(0,a.jsx)("input",{...e,className:"custom-input-class"})}),(0,a.jsx)("div",{className:"resend-code mt-4",children:P>0?(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"resend-text",children:[" ",(0,c.Iu)("resendCodeIn")]}),(0,a.jsxs)("span",{className:"resend-time",children:[" ",P," ",(0,c.Iu)("seconds")]})]}):(0,a.jsx)("button",{onClick:e=>k(e),id:"resendbutton",className:"btn",children:(0,c.Iu)("resendLbl")})})]}),(0,a.jsx)("form",{onClick:e=>E(e),children:(0,a.jsx)("div",{className:"py-3",children:(0,a.jsx)("button",{type:"submit",className:"btn   btn-lg  w-100",id:"submitbutton",children:(0,c.Iu)("submitBtn")})})})]})})]})]})}),(0,a.jsx)("div",{id:"recaptcha-container",style:{display:"none"}})]})})}}}]);