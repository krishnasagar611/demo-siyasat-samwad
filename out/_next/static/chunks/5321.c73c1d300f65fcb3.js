(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5321],{97376:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return U}});var l=t(85893),r=t(67294),u=t(12645),n=t(73680),i=t(85955),d=t(76529),o=t(9198),s=t.n(o),c=t(15411),f=t(94206),m=t(30188),p=t(51527),g=t(9473),h=t(93077),y=t(20135),b=t(90578),v=t(62481),x=t(32512),j=t(71911),I=t(30719),_=t(71167),w=t.n(_),N=t(39332),S=t(81426),L=t(46321);t(81823);var D=t(87633),C=t(45569),P=t(70477),Z=t(86501),T=t(58928);let{TextArea:V}=t(46462).default,{Option:O}=y.default;j.ZP.use([j.W_,j.tl]);var U=()=>{var e,a,t;let[o,j]=(0,r.useState)(!1),[_,U]=(0,r.useState)([]),[M,q]=(0,r.useState)(!1),[k,B]=(0,r.useState)(!1),[F,K]=(0,r.useState)(!1),[z,E]=(0,r.useState)([]),[R,A]=(0,r.useState)(!1),[W,Y]=(0,r.useState)(""),[J,$]=(0,r.useState)(!1),Q=(0,g.v9)(p.Nr),G=(0,g.v9)(h.Qm),H=(0,N.useRouter)(),X=(0,g.v9)(S.vV),[ee,ea]=(0,r.useState)({defualtTitle:null,defaultMetatitle:null,defaultMetaDescription:null,defaultMetaKeyword:null,defaultSlug:null,defualtLanguage:null,defualtCategory:null,defualtCategoryID:null,defualtSubCategory:null,defualtSubCategoryID:null,defaultSelector:null,defaultType:null,defualtTag:null,defaultTagName:null,defualtContent:null,defualtStartDate:null,defualtUrl:null,defaultVideoData:null,defaultImageData:null,defaultImagefile:null,defualtLocation:null}),[et,el]=(0,r.useState)(!1),er=async e=>{j(!0);let a=JSON.parse(e);ea(e=>({...e,defualtLanguage:a.language})),(0,h.Bg)(a.language,a.code,a.id),ea(e=>({...e,defualtCategoryID:null,defualtCategory:null})),q(!1)},eu=(e,a)=>{let t=JSON.parse(e);ea({...ee,defualtCategoryID:t,defualtCategory:a.label}),U([]),(0,m.oN)({category_id:t,onSuccess:e=>{if(0===e.data.length){U([]),q(!1);return}U(e.data),q(!0)},onError:e=>{"No Data Found"===e&&(q(!1),U(""))}})},en=(e,a)=>{let t=JSON.parse(e);ea({...ee,defualtSubCategoryID:t,defualtSubCategory:a.label})},ei=e=>{if(e.target.files[0]&&!e.target.files[0].type.includes("video"))return Z.ZP.error("Please select a video format"),!0;ea({...ee,defaultVideoData:e.target.files[0]}),el(!0)},ed=e=>{let a=eb.find(a=>a.id===e);"standard_post"===a.name?(ea({...ee,defaultSelector:(0,n.Iu)("stdPostLbl"),defaultType:"standard_post",defualtUrl:null}),B(!1),K(!1),$(!1)):"video_youtube"===a.name?(ea({...ee,defaultSelector:(0,n.Iu)("videoYoutubeLbl"),defaultType:"video_youtube"}),B(!0),$(!1),K(!1)):"video_other"===a.name?(ea({...ee,defaultSelector:(0,n.Iu)("videoOtherUrlLbl"),defaultType:"video_other"}),B(!1),$(!0),K(!1)):("video_upload"===a.name?(ea({...ee,defaultSelector:(0,n.Iu)("videoUploadLbl"),defaultType:"video_upload"}),B(!1),K(!0)):(B(!1),K(!1)),$(!1))},eo=e=>!!/^(?:http(?:s)?:\/\/)?(?:www\.)?(?:m\.)?(?:youtu\.be\/|youtube\.com\/((?:watch)\?(?:.*&)?v(?:i)?=|(?:embed|v|vi|user)\/))([^\?&\"'>]{11})/.test(e)||(/^(https?:\/\/)?(www\.)?(youtube\.com)\/(shorts)/.test(e)?(Z.ZP.error("YouTube Shorts are not supported"),!1):void 0),es=e=>{if(e.preventDefault(),!ee.defualtTitle){Z.ZP.error((0,n.Iu)("titlerequired"));return}if(!ee.defaultMetatitle){Z.ZP.error((0,n.Iu)("metaTitlerequired"));return}if(!ee.defaultMetaDescription){Z.ZP.error((0,n.Iu)("metaDescriptionrequired"));return}if(!ee.defaultMetaKeyword){Z.ZP.error((0,n.Iu)("metaKeywordsrequired"));return}if(!ee.defaultSlug){Z.ZP.error((0,n.Iu)("slugrequired"));return}if(!ee.defualtLanguage){Z.ZP.error((0,n.Iu)("selectlanguage"));return}if(!ee.defualtCategory){Z.ZP.error((0,n.Iu)("selectcategory"));return}if(!ee.defaultType){Z.ZP.error((0,n.Iu)("contentTyperequired"));return}if("video_upload"===ee.defaultType&&ea({...ee,defualtUrl:ee.defaultVideoData}),""===ee.defualtCategoryID){Z.ZP.error((0,n.Iu)("plzSelCatLbl"));return}if("video_youtube"===ee.defaultType){if(!eo(ee.defualtUrl)){Z.ZP.error("URL is not a YouTube video");return}}else if("video_other"===ee.defaultType&&eo(ee.defualtUrl)){Z.ZP.error("YouTube videos are not supported for this content type");return}if("video_upload"===ee.defaultType&&!et){Z.ZP.error((0,n.Iu)("plzUploadVideoLbl"));return}if(null===ee.defaultImageData){Z.ZP.error((0,n.Iu)("uploadMainImageLbl"));return}A(!0)},ec=async()=>{try{let{data:e}=await C.Q.getCategories({offset:"",limit:"70",language_id:G.id});return e.data}catch(e){"No Data Found"===e&&(0,n.Iu)("nodatafound")}},ef=async()=>{try{let{data:e}=await L.k.getTag({language_id:G.id});return e.data}catch(e){console.log(e)}},em=async()=>{try{let{data:e}=await P.V.getlocation({limit:1e4});return e.data}catch(e){console.log(e)}},{data:ep}=(0,D.a)({queryKey:["getcategories",G],queryFn:ec}),{data:eg}=(0,D.a)({queryKey:["getTag",G.id],queryFn:ef}),{data:eh}=(0,D.a)({queryKey:["getlocation"],queryFn:em}),ey=null==X?void 0:X.location_news_mode,eb=[{id:1,type:(0,n.Iu)("stdPostLbl"),name:"standard_post",param:"empty"},{id:2,type:(0,n.Iu)("videoYoutubeLbl"),name:"video_youtube",param:"url"},{id:3,type:(0,n.Iu)("videoOtherUrlLbl"),name:"video_other",param:"url"},{id:4,type:(0,n.Iu)("videoUploadLbl"),name:"video_upload",param:"file"}],ev=e=>{let a=e.map(e=>{let a=eg.find(a=>a.tag_name===e);return a?a.id:null});a=a.filter(e=>null!==e).join(","),ea(t=>({...t,defualtTag:a,defaultTagName:e.join(",")}))},ex=e=>{let a=e.target.files[0];if(!a)return;if(!a.type.startsWith("image/")){Z.ZP.error("Please select an image file.");return}e.preventDefault();let t=e.target.files[0];ea({...ee,defaultImageData:URL.createObjectURL(t),defaultImagefile:t})},ej=()=>{let e=ee.defaultSlug;return(e=(e=(e=e.replace(/[^a-zA-Z0-9-]/g,"-")).replace(/-+/g,"-")).replace(/^-+/,"")).replace(/-+$/,"")},eI=async e=>{var a;if(e.preventDefault(),!W){Z.ZP.error((0,n.Iu)("descriptionisrequire"));return}let t=await ej();await (0,m.B7)({action_type:1,category_id:ee.defualtCategoryID,subcategory_id:ee.defualtSubCategoryID,tag_id:ee.defualtTag,title:ee.defualtTitle,meta_title:ee.defaultMetatitle,meta_description:ee.defaultMetaDescription,meta_keyword:ee.defaultMetaKeyword,slug:t,content_type:ee.defaultType,content_data:ee.defualtUrl,description:W,image:ee.defaultImagefile,ofile:z,show_till:null===(a=ee.defualtStartDate)||void 0===a?void 0:a.toISOString().split("T")[0],language_id:G.id,location_id:ee.defualtLocation?ee.defualtLocation:null,onSuccess:e=>{Z.ZP.success(e.message),H.push("/manage-news")},onError:e=>{Z.ZP.error(e)}})};return(0,l.jsxs)(T.default,{children:[(0,l.jsx)(u.Z,{SecondElement:(0,n.Iu)("createNewsLbl")}),(0,l.jsx)("div",{className:"create_news py-5 bg-white",children:(0,l.jsx)("div",{className:"container",children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-md-7 col-12",children:(0,l.jsx)("img",{className:"create-img",src:"/_next/static/media/Create-news.b8411f27.svg",alt:"create news"})}),(0,l.jsx)("div",{className:"col-md-5 col-12",children:R?(0,l.jsxs)(i.Z,{onSubmit:e=>eI(e),children:[(0,l.jsxs)("div",{className:"form_title",children:[(0,l.jsx)("p",{className:"mb-2",children:(0,n.Iu)("createNewsLbl")}),(0,l.jsx)("span",{className:"mb-2",children:(0,n.Iu)("step2of2Lbl")})]}),(0,l.jsx)("div",{className:"editor",children:(0,l.jsx)(w(),{value:W,onChange:e=>{Y(e)}})}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-md-6",children:(0,l.jsx)(d.Z,{type:"button",className:"btn btn-secondary backbtn",onClick:()=>{A(!1)},children:(0,n.Iu)("back")})}),(0,l.jsx)("div",{className:"col-md-6",children:(0,l.jsx)(d.Z,{type:"submit",className:" btn btn-secondary subbtn",children:(0,n.Iu)("submitBtn")})})]})]}):(0,l.jsxs)(i.Z,{onSubmit:e=>es(e),children:[(0,l.jsxs)("div",{className:"form_title",children:[(0,l.jsx)("p",{className:"mb-2",children:(0,n.Iu)("createNewsLbl")}),(0,l.jsx)("span",{className:"mb-2",children:(0,n.Iu)("step1Of2Lbl")})]}),(0,l.jsxs)("div",{className:"form_details",children:[(0,l.jsx)("div",{className:"input_form mb-2",children:(0,l.jsx)("input",{type:"text",placeholder:(0,n.Iu)("titleLbl"),defaultValue:ee.defualtTitle,onChange:e=>ea({...ee,defualtTitle:e.target.value})})}),(0,l.jsxs)("div",{className:"input_form textarea mb-2",children:[(0,l.jsx)(V,{rows:2,placeholder:(0,n.Iu)("meta-title"),defaultValue:ee.defaultMetatitle,onChange:e=>ea({...ee,defaultMetatitle:e.target.value})}),(0,l.jsx)(b.Z,{closable:!0,showIcon:!0,className:"mt-2",message:(0,n.Iu)("metaTitleWarningLbl"),type:"warning"})]}),(0,l.jsxs)("div",{className:"input_form mb-2",children:[(0,l.jsx)(V,{rows:2,placeholder:(0,n.Iu)("meta-description"),defaultValue:ee.defaultMetaDescription,onChange:e=>ea({...ee,defaultMetaDescription:e.target.value})}),(0,l.jsx)(b.Z,{closable:!0,showIcon:!0,className:"mt-2",message:(0,n.Iu)("metaDescriptionWarningLbl"),type:"warning"})]}),(0,l.jsxs)("div",{className:"input_form mb-2",children:[(0,l.jsx)(V,{rows:2,placeholder:(0,n.Iu)("meta-keywords"),defaultValue:ee.defaultMetaKeyword,onChange:e=>ea({...ee,defaultMetaKeyword:e.target.value})}),(0,l.jsx)(b.Z,{closable:!0,showIcon:!0,className:"mt-2",message:(0,n.Iu)("metaKeywordWarningLbl"),type:"warning"})]}),(0,l.jsxs)("div",{className:"input_form mb-2",children:[(0,l.jsx)("input",{placeholder:(0,n.Iu)("slug"),defaultValue:ee.defaultSlug,onChange:e=>ea({...ee,defaultSlug:e.target.value})}),(0,l.jsx)(b.Z,{closable:!0,showIcon:!0,className:"mt-2",message:(0,n.Iu)("slugWarningLbl"),type:"warning"})]}),(0,l.jsx)("div",{className:"dropdown_form mb-2",children:(0,l.jsx)(y.default,{style:{width:"100%"},defaultValue:ee.defualtLanguage,placeholder:(0,n.Iu)("chooseLanLbl"),onChange:e=>er(e),optionLabelProp:"label",children:Q&&Q.map((e,a)=>(0,l.jsx)(O,{value:JSON.stringify(e),label:e.language,children:(0,l.jsxs)(v.Z,{children:[" ",e.language]})},a))})}),o?(0,l.jsx)("div",{className:"dropdown_form mb-2",children:(0,l.jsx)(y.default,{style:{width:"100%"},defaultValue:ee.defualtCategory,placeholder:(0,n.Iu)("catLbl"),onChange:(e,a)=>eu(e,a),optionLabelProp:"label",className:"createSelectDropDown",children:ep&&ep.map((e,a)=>(0,l.jsx)(O,{value:e.id,label:e.category_name,children:(0,l.jsxs)(v.Z,{children:[" ",e.category_name]})},a))})}):null,M?(0,l.jsx)("div",{className:"dropdown_form mb-2",children:(0,l.jsx)(y.default,{style:{width:"100%"},defaultValue:ee.defualtSubCategory,placeholder:(0,n.Iu)("subcatLbl"),onChange:(e,a)=>en(e,a),optionLabelProp:"label",children:_&&_.map((e,a)=>(0,l.jsx)(O,{value:e.id,label:e.subcategory_name,children:(0,l.jsxs)(v.Z,{children:[" ",e.subcategory_name]})},a))})}):null,"1"===ey?(0,l.jsx)("div",{className:"dropdown_form mb-2",children:(0,l.jsx)(y.default,{style:{width:"100%"},placeholder:"Select Location",defaultValue:ee.defualtLocation,onChange:e=>ea({...ee,defualtLocation:e}),children:eh&&eh.map(e=>(0,l.jsx)(y.default.Option,{value:e.id,children:e.location_name},e.id))})}):null,(0,l.jsx)("div",{className:"dropdown_form mb-2",children:(0,l.jsx)(y.default,{style:{width:"100%"},defaultValue:ee.defaultSelector,placeholder:(0,n.Iu)("stdPostLbl"),onChange:(e,a)=>ed(e,a),optionLabelProp:"label",children:eb&&eb.map((e,a)=>(0,l.jsx)(O,{value:e.id,label:e.type,children:e.type},a))})}),k?(0,l.jsx)("div",{className:"input_form mb-2",children:(0,l.jsx)("input",{type:"text",className:"inputurl",placeholder:(0,n.Iu)("youtubeUrlLbl"),defaultValue:ee.defualtUrl,onChange:e=>ea({...ee,defualtUrl:e.target.value}),required:!0})}):null,J?(0,l.jsx)("div",{className:"input_form mb-2",children:(0,l.jsx)("input",{type:"text",className:"inputurl",placeholder:(0,n.Iu)("otherUrlLbl"),defaultValue:ee.defualtUrl,onChange:e=>ea({...ee,defualtUrl:e.target.value}),required:!0})}):null,F?(0,l.jsxs)("div",{className:"input_form mb-2 video_url",children:[(0,l.jsx)("input",{type:"file",id:"videoInput",name:"video",accept:"video/*",onChange:e=>ei(e)}),(0,l.jsxs)("label",{htmlFor:"videoInput",children:[" ",(null===(e=ee.defaultVideoData)||void 0===e?void 0:e.name)?null===(a=ee.defaultVideoData)||void 0===a?void 0:a.name:(0,n.Iu)("uploadVideoLbl"),(0,l.jsx)(c.aBR,{className:"uploadVideo"})]}),(0,l.jsx)("input",{type:"file",className:"form-control",id:"videoInput",name:"video",accept:"video/*",placeholder:"Upload File",disabled:!0,hidden:!0})]}):null,(0,l.jsx)("div",{className:"dropdown_form mb-2",children:(0,l.jsx)(y.default,{mode:"multiple",style:{width:"100%"},defaultValue:null==ee?void 0:null===(t=ee.defaultTagName)||void 0===t?void 0:t.split(","),placeholder:(0,n.Iu)("tagLbl"),onChange:e=>ev(e),optionLabelProp:"label",children:eg&&eg.map((e,a)=>(0,l.jsx)(O,{value:e.tag_name,label:e.tag_name,children:(0,l.jsx)(v.Z,{children:e.tag_name})},a))})}),(0,l.jsxs)("div",{className:"show_date mb-2",children:[(0,l.jsx)(s(),{dateFormat:"yyyy-MM-dd",selected:ee.defualtStartDate,placeholderText:(0,n.Iu)("showTilledDate"),clearButtonTitle:!0,todayButton:"Today",minDate:new Date,onChange:e=>ea({...ee,defualtStartDate:e})}),(0,l.jsx)(f.jDB,{className:"form-calender"})]}),(0,l.jsxs)("div",{className:"main_image mb-2",children:[(0,l.jsx)("input",{type:"file",name:"image",id:"file",accept:"image/*",className:"file_upload",onChange:e=>ex(e)}),(0,l.jsxs)("label",{htmlFor:"file",children:[" ",(0,l.jsxs)("em",{children:[ee.defaultImageData?null:(0,l.jsx)(c.MbD,{})," ",ee.defaultImageData?null:(0,n.Iu)("uploadMainImageLbl")]})]}),ee.defaultImageData&&(0,l.jsx)("div",{className:"mainimage",children:(0,l.jsx)("img",{src:ee.defaultImageData,alt:"mainimage"})}),(0,l.jsx)("input",{type:"text",className:"form-control",accept:"image/*",placeholder:"Upload File",id:"file1",name:"myfile",disabled:!0,hidden:!0})]}),(0,l.jsx)("div",{className:"other_image mb-2",children:(0,l.jsx)(x.ZP,{onDrop:e=>{let a=e.filter(e=>e.type.startsWith("image/"));if(e.length!==a.length){Z.ZP.error("Only image files are allowed.");return}E([...z,...a])},multiple:!0,children:e=>{let{getRootProps:a,getInputProps:t}=e;return(0,l.jsxs)("div",{...a(),className:"dropzone",children:[(0,l.jsx)("input",{...t(),className:"",accept:"image/*"}),(0,l.jsx)(c.MbD,{className:"me-1"}),(0,n.Iu)("uploadOtherImageLbl")]})}})}),(0,l.jsx)("div",{className:"image_slider",children:(0,l.jsx)(I.tq,{loop:!1,speed:750,spaceBetween:10,slidesPerView:3.5,navigation:!1,autoplay:!1,breakpoints:{0:{slidesPerView:2.5},768:{slidesPerView:2.5},992:{slidesPerView:3},1200:{slidesPerView:3.5}},children:z.map((e,a)=>(0,l.jsx)(I.o5,{children:(0,l.jsx)("img",{src:URL.createObjectURL(e),alt:"Uploaded ".concat(a)})},a))})}),(0,l.jsx)(d.Z,{type:"submit",className:"btn btn-secondary next-btn",children:(0,n.Iu)("nxt")})]})]})})]})})})]})}},69590:function(e){var a="undefined"!=typeof Element,t="function"==typeof Map,l="function"==typeof Set,r="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;e.exports=function(e,u){try{return function e(u,n){if(u===n)return!0;if(u&&n&&"object"==typeof u&&"object"==typeof n){var i,d,o,s;if(u.constructor!==n.constructor)return!1;if(Array.isArray(u)){if((i=u.length)!=n.length)return!1;for(d=i;0!=d--;)if(!e(u[d],n[d]))return!1;return!0}if(t&&u instanceof Map&&n instanceof Map){if(u.size!==n.size)return!1;for(s=u.entries();!(d=s.next()).done;)if(!n.has(d.value[0]))return!1;for(s=u.entries();!(d=s.next()).done;)if(!e(d.value[1],n.get(d.value[0])))return!1;return!0}if(l&&u instanceof Set&&n instanceof Set){if(u.size!==n.size)return!1;for(s=u.entries();!(d=s.next()).done;)if(!n.has(d.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(u)&&ArrayBuffer.isView(n)){if((i=u.length)!=n.length)return!1;for(d=i;0!=d--;)if(u[d]!==n[d])return!1;return!0}if(u.constructor===RegExp)return u.source===n.source&&u.flags===n.flags;if(u.valueOf!==Object.prototype.valueOf&&"function"==typeof u.valueOf&&"function"==typeof n.valueOf)return u.valueOf()===n.valueOf();if(u.toString!==Object.prototype.toString&&"function"==typeof u.toString&&"function"==typeof n.toString)return u.toString()===n.toString();if((i=(o=Object.keys(u)).length)!==Object.keys(n).length)return!1;for(d=i;0!=d--;)if(!Object.prototype.hasOwnProperty.call(n,o[d]))return!1;if(a&&u instanceof Element)return!1;for(d=i;0!=d--;)if(("_owner"!==o[d]&&"__v"!==o[d]&&"__o"!==o[d]||!u.$$typeof)&&!e(u[o[d]],n[o[d]]))return!1;return!0}return u!=u&&n!=n}(e,u)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}}}]);