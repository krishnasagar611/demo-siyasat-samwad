"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7108],{87108:function(e,a,t){t.r(a),t.d(a,{default:function(){return B}});var l=t(85893),s=t(67294),i=t(12645),n=t(73680),d=t(85955),r=t(76529),o=t(9198),u=t.n(o),c=t(15411),m=t(94206),p=t(30188),g=t(51527),h=t(9473),y=t(20135),f=t(90578),b=t(62481),v=t(32512),x=t(71911),_=t(30719),j=t(71167),I=t.n(j),w=t(93077),N=t(98569),L=t(39332),T=t(95711),Z=t(72567),P=t(81426),V=t(46321),S=t(81823),C=t(87633),D=t(70477),M=t(45569),k=t(58326);let U={getsubcategorybycategory:e=>{let{category_id:a,language_id:t}=e;return k.Z.get(S.jB,{params:{category_id:a,language_id:t}})}};var q=t(86501),E=t(58928);let{TextArea:O}=t(46462).default,{Option:F}=y.default;x.ZP.use([x.W_,x.tl]);var B=()=>{var e,a,t,o;let[x,j]=(0,s.useState)(!1),[k,B]=(0,s.useState)(null),[K,R]=(0,s.useState)(!1),[W,Y]=(0,s.useState)(!1),[z,J]=(0,s.useState)([]),[A,H]=(0,s.useState)(!1),[$,G]=(0,s.useState)(!1),[Q,X]=(0,s.useState)(),ee=(0,h.v9)(g.Nr),ea=(0,h.v9)(w.$C),[et,el]=(0,s.useState)(ea.content_value),[es,ei]=(0,s.useState)([]),[en,ed]=(0,s.useState)(!1),[er,eo]=(0,s.useState)(ea.content_value),[eu,ec]=(0,s.useState)(!1),{id:em}=(0,S.G3)(),ep=(0,h.v9)(P.vV),eg=null==ep?void 0:ep.location_news_mode,eh=(0,L.useRouter)(),ey=ee.find(e=>e.id===ea.language_id),[ef,eb]=(0,s.useState)({defualTitle:ea.title,defaultMetatitle:ea.meta_title,defaultMetaDescription:ea.meta_description,defaultMetaKeyword:ea.meta_keyword,defaultSlug:ea.slug,categorydefault:null===(e=ea.category)||void 0===e?void 0:e.category_name,standardType:ea.content_type,contentValue:ea.content_value,tagValue:null===(a=ea.tag_name)||void 0===a?void 0:a.split(","),dateValue:"0000-00-00"===ea.show_till?null:new Date(ea.show_till),imagedefault:ea.image,languageId:ea.language_id,categoryID:ea.category_id,tagsid:ea.tag_id,contentType:ea.content_type,multipleImage:ea.images,subcategorydefault:null==ea?void 0:null===(t=ea.sub_category)||void 0===t?void 0:t.subcategory_name,subcategoryID:ea.subcategory_id,languageName:ey.language,descriptionValue:ea.description,defualtLocationId:ea.location_id,defualtLocation:ea.location.location_name}),ev=e=>{eb({...ef,dateValue:e})},ex=e=>{G(!0),X(e)},e_=(e,a)=>{let t=JSON.parse(e);eb({...ef,categorydefault:a.label,categoryID:t}),ei([]),(0,p.oN)({category_id:t,onSuccess:e=>{if(0===e.data.length){ei([]),eb({...ef,subcategorydefault:""}),ed(!1);return}ei(e.data),ed(!0)},onError:e=>{"No Data Found"===e&&(ed(!1),ei(""))}})},ej=(e,a)=>{let t=JSON.parse(e);eb({...ef,subcategorydefault:a.label,subcategoryID:t})},eI=e=>{if(e.target.files[0]&&!e.target.files[0].type.includes("video"))return q.ZP.error("Please select a video format"),!0;eo(e.target.files[0])},ew=e=>{let a=ek.find(a=>a.id===e);if(a){let e=a.name;e!==ea.content_type&&eb(ef.contentValue=""),"standard_post"===e?(eb({...ef,standardType:(0,n.Iu)("stdPostLbl"),contentType:"standard_post"}),R(!1),Y(!1),ec(!1),el(null)):"video_youtube"===e?(eb({...ef,standardType:(0,n.Iu)("videoYoutubeLbl"),contentType:"video_youtube"}),R(!0),Y(!1),ec(!1)):"video_other"===e?(eb({...ef,standardType:(0,n.Iu)("videoOtherUrlLbl"),contentType:"video_other"}),R(!1),ec(!0),Y(!1)):("video_upload"===e?(eb({...ef,standardType:(0,n.Iu)("videoUploadLbl"),contentType:"video_upload"}),R(!1),Y(!0)):(R(!1),Y(!1)),ec(!1))}},eN=e=>!!/^(?:http(?:s)?:\/\/)?(?:www\.)?(?:m\.)?(?:youtu\.be\/|youtube\.com\/((?:watch)\?(?:.*&)?v(?:i)?=|(?:embed|v|vi|user)\/))([^\?&\"'>]{11})/.test(e)||(/^(https?:\/\/)?(www\.)?(youtube\.com)\/(shorts)/.test(e)?(q.ZP.error("YouTube Shorts are not supported"),!1):void 0),eL=e=>{if(e.preventDefault(),!ef.defualTitle){q.ZP.error((0,n.Iu)("titlerequired"));return}if(!ef.defaultMetatitle){q.ZP.error((0,n.Iu)("metaTitlerequired"));return}if(!ef.defaultMetaDescription){q.ZP.error((0,n.Iu)("metaDescriptionrequired"));return}if(!ef.defaultMetaKeyword){q.ZP.error((0,n.Iu)("metaKeywordsrequired"));return}if(!ef.defaultSlug){q.ZP.error((0,n.Iu)("slugrequired"));return}if(ef.standardType===(0,n.Iu)("videoUploadLbl")&&el(er),ef.standardType===(0,n.Iu)("videoYoutubeLbl")){if(!eN(et)){q.ZP.error("URL is not a YouTube video");return}}else if(ef.standardType===(0,n.Iu)("videoOtherUrlLbl")&&eN(et)){q.ZP.error("YouTube videos are not supported for this content type");return}H(!0)},eT=async()=>{try{let{data:e}=await V.k.getTag({language_id:em});return e.data}catch(e){console.log(e)}},eZ=async()=>{try{let{data:e}=await D.V.getlocation({});return e.data}catch(e){console.log(e)}},eP=async()=>{try{let{data:e}=await M.Q.getCategories({offset:"",limit:"70",language_id:ef.languageId});return e.data}catch(e){console.log(e)}},eV=async()=>{try{let{data:e}=await U.getsubcategorybycategory({category_id:ea.category_id,language_id:em});return ei(e.data),e.data}catch(e){console.log(e)}},{status:eS}=(0,C.a)({queryKey:["getSubcategorybycategories",ef.languageId],queryFn:eV}),{data:eC}=(0,C.a)({queryKey:["getcategories",ef.languageId],queryFn:eP}),{data:eD}=(0,C.a)({queryKey:["getTag",em],queryFn:eT}),{data:eM}=(0,C.a)({queryKey:["getlocation"],queryFn:eZ});(0,s.useEffect)(()=>{ey&&(j(!0),eb({...ef,languageId:ey.id,languageName:ey.language})),"standard_post"===ea.content_type?(eb({...ef,standardType:(0,n.Iu)("stdPostLbl"),contentType:"standard_post"}),R(!1),Y(!1),el(null)):"video_youtube"===ea.content_type?(eb({...ef,standardType:(0,n.Iu)("videoYoutubeLbl"),contentType:"video_youtube"}),R(!0),Y(!1)):"video_other"===ea.content_type?(eb({...ef,standardType:(0,n.Iu)("videoOtherUrlLbl"),contentType:"video_other"}),R(!0),Y(!1)):"video_upload"===ea.content_type?(eb({...ef,standardType:(0,n.Iu)("videoUploadLbl"),contentType:"video_upload"}),R(!1),Y(!0)):(R(!1),Y(!1)),"success"===eS&&ed(!0),"error"===eS&&ed(!1)},[]);let ek=[{id:1,type:(0,n.Iu)("stdPostLbl"),name:"standard_post",param:"empty"},{id:2,type:(0,n.Iu)("videoYoutubeLbl"),name:"video_youtube",param:"url"},{id:3,type:(0,n.Iu)("videoOtherUrlLbl"),name:"video_other",param:"url"},{id:4,type:(0,n.Iu)("videoUploadLbl"),name:"video_upload",param:"file"}],eU=e=>{let a=e.map(e=>{let a=eD.find(a=>a.tag_name===e);return a?a.id:null});a=a.filter(e=>null!==e).join(","),eb(t=>({...t,tagsid:a,tagValue:e}))},eq=e=>{let a=e.target.files[0];if(!a)return;if(!a.type.startsWith("image/")){q.ZP.error("Please select an image file.");return}e.preventDefault();let t=e.target.files[0];eb({...ef,imagedefault:t}),B(URL.createObjectURL(t))},eE=()=>{let e=ef.defaultSlug;return(e=(e=(e=e.replace(/[^a-zA-Z0-9-]/g,"-")).replace(/-+/g,"-")).replace(/^-+/,"")).replace(/-+$/,"")};(0,s.useEffect)(()=>{ef.descriptionValue&&""!=ef.descriptionValue.trim()||q.ZP.error((0,n.Iu)("descriptionrequired"))},[ef.descriptionValue]);let eO=async e=>{if(e.preventDefault(),!ef.descriptionValue||"<p><br></p>"==ef.descriptionValue){q.ZP.error((0,n.Iu)("descriptionrequired"));return}let a=await eE();await (0,p.B7)({action_type:2,category_id:ef.categoryID,subcategory_id:ef.subcategoryID,tag_id:ef.tagsid,title:ef.defualTitle,meta_title:ef.defaultMetatitle,meta_description:ef.defaultMetaDescription,meta_keyword:ef.defaultMetaKeyword,slug:a,content_type:ef.contentType,content_data:et,description:ef.descriptionValue,image:ef.imagedefault,ofile:z,show_till:ef.dateValue.toISOString().split("T")[0],language_id:ef.languageId,location_id:ef.defualtLocationId?ef.defualtLocationId:null,onSuccess:e=>{q.ZP.success(e.message),eh.push("/manage-news")},onError:e=>{q.ZP.error(e)}})},eF=e=>{j(!0);let a=JSON.parse(e);eb(e=>({...e,languageId:a.id,languageName:a.language,categorydefault:null}))},eB=(e,a)=>{e.preventDefault(),(0,p.ji)({image_id:a,onSuccess:e=>{q.ZP.success(e.message);let t=ef.multipleImage.filter(e=>e.id!==a);eb(e=>({...e,multipleImage:t}))},onError:e=>{q.ZP.error(e.message)}})};return(0,l.jsxs)(E.default,{children:[(0,l.jsx)(i.Z,{SecondElement:(0,n.Iu)("editNewsLbl")}),(0,l.jsxs)("div",{className:"create_news py-5 bg-white",children:[(0,l.jsx)("div",{className:"container",children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-md-7 col-12",children:(0,l.jsx)("img",{className:"edit-img",src:"/_next/static/media/manage-news.31299bbf.svg",alt:"create news"})}),(0,l.jsx)("div",{className:"col-md-5 col-12",children:A?(0,l.jsxs)(d.Z,{onSubmit:e=>eO(e),children:[(0,l.jsxs)("div",{className:"form_title",children:[(0,l.jsx)("p",{className:"mb-2",children:(0,n.Iu)("createNewsLbl")}),(0,l.jsx)("span",{className:"mb-2",children:(0,n.Iu)("step2of2Lbl")})]}),(0,l.jsx)("div",{className:"editor",children:(0,l.jsx)(I(),{defaultValue:ef.descriptionValue,onChange:e=>{eb({...ef,descriptionValue:e})}})}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-md-6",children:(0,l.jsx)(r.Z,{type:"button",className:"btn btn-secondary backbtn",onClick:()=>{H(!1)},children:(0,n.Iu)("back")})}),(0,l.jsx)("div",{className:"col-md-6",children:(0,l.jsx)(r.Z,{type:"submit",className:" btn btn-secondary subbtn",children:(0,n.Iu)("submitBtn")})})]})]}):(0,l.jsxs)(d.Z,{onSubmit:e=>eL(e),children:[(0,l.jsxs)("div",{className:"form_title",children:[(0,l.jsx)("p",{className:"mb-2",children:(0,n.Iu)("editNewsLbl")}),(0,l.jsx)("span",{className:"mb-2",children:(0,n.Iu)("step1Of2Lbl")})]}),(0,l.jsxs)("div",{className:"form_details",children:[(0,l.jsx)("div",{className:"input_form mb-2",children:(0,l.jsx)("input",{type:"text",defaultValue:ef.defualTitle,placeholder:(0,n.Iu)("titleLbl"),onChange:e=>eb({...ef,defualTitle:e.target.value})})}),(0,l.jsxs)("div",{className:"input_form textarea mb-2",children:[(0,l.jsx)(O,{rows:2,placeholder:(0,n.Iu)("meta-title"),defaultValue:ef.defaultMetatitle,onChange:e=>eb({...ef,defaultMetatitle:e.target.value})}),(0,l.jsx)(f.Z,{closable:!0,showIcon:!0,className:"mt-2",message:(0,n.Iu)("metaTitleWarningLbl"),type:"warning"})]}),(0,l.jsxs)("div",{className:"input_form mb-2",children:[(0,l.jsx)(O,{rows:2,placeholder:(0,n.Iu)("meta-description"),defaultValue:ef.defaultMetaDescription,onChange:e=>eb({...ef,defaultMetaDescription:e.target.value})}),(0,l.jsx)(f.Z,{closable:!0,showIcon:!0,className:"mt-2",message:(0,n.Iu)("metaDescriptionWarningLbl"),type:"warning"})]}),(0,l.jsxs)("div",{className:"input_form mb-2",children:[(0,l.jsx)(O,{rows:2,placeholder:(0,n.Iu)("meta-keywords"),defaultValue:ef.defaultMetaKeyword,onChange:e=>eb({...ef,defaultMetaKeyword:e.target.value})}),(0,l.jsx)(f.Z,{closable:!0,showIcon:!0,className:"mt-2",message:(0,n.Iu)("metaKeywordWarningLbl"),type:"warning"})]}),(0,l.jsxs)("div",{className:"input_form mb-2",children:[(0,l.jsx)("input",{placeholder:(0,n.Iu)("slug"),defaultValue:ef.defaultSlug,onChange:e=>eb({...ef,defaultSlug:e.target.value})}),(0,l.jsx)(f.Z,{closable:!0,showIcon:!0,className:"mt-2",message:(0,n.Iu)("slugWarningLbl"),type:"warning"})]}),(0,l.jsx)("div",{className:"input_form mb-2",children:(0,l.jsx)("input",{type:"text",defaultValue:ef.defualTitle,placeholder:(0,n.Iu)("titleLbl"),onChange:e=>eb({...ef,defualTitle:e.target.value})})}),(0,l.jsx)("div",{className:"dropdown_form mb-2",children:(0,l.jsx)(y.default,{style:{width:"100%"},defaultValue:ef.languageName,placeholder:(0,n.Iu)("chooseLanLbl"),onChange:e=>eF(e),optionLabelProp:"label",children:ee&&ee.map((e,a)=>(0,l.jsx)(F,{value:JSON.stringify(e),label:e.language,children:(0,l.jsxs)(b.Z,{children:[" ",e.language]})},a))})}),x?(0,l.jsx)("div",{className:"dropdown_form mb-2",children:(0,l.jsx)(y.default,{style:{width:"100%"},value:ef.categorydefault,placeholder:(0,n.Iu)("catLbl"),onChange:(e,a)=>e_(e,a),optionLabelProp:"label",children:eC&&eC.map((e,a)=>(0,l.jsx)(F,{value:e.id,label:e.category_name,children:(0,l.jsxs)(b.Z,{children:[" ",e.category_name]})},a))})}):null,en?(0,l.jsx)("div",{className:"dropdown_form mb-2",children:(0,l.jsx)(y.default,{style:{width:"100%"},value:ef.subcategorydefault,placeholder:(0,n.Iu)("subcatLbl"),onChange:(e,a)=>ej(e,a),optionLabelProp:"label",children:es&&es.map((e,a)=>(0,l.jsx)(F,{value:e.id,label:e.subcategory_name,children:(0,l.jsxs)(b.Z,{children:[" ",e.subcategory_name]})},a))})}):null,"1"===eg?(0,l.jsx)("div",{className:"dropdown_form mb-2",children:(0,l.jsx)(y.default,{style:{width:"100%"},value:ef.defualtLocation,onChange:e=>eb({...ef,defualtLocationId:e,defualtLocation:e}),children:eM&&eM.map(e=>(0,l.jsx)(y.default.Option,{value:e.id,children:e.location_name},e.id))})}):null,(0,l.jsx)("div",{className:"dropdown_form mb-2",children:(0,l.jsx)(y.default,{style:{width:"100%"},value:ef.standardType,placeholder:(0,n.Iu)("stdPostLbl"),onChange:(e,a)=>ew(e,a),optionLabelProp:"label",children:ek&&ek.map((e,a)=>(0,l.jsx)(F,{value:e.id,label:JSON.stringify(e.name),children:e.type},a))})}),K?(0,l.jsx)("div",{className:"input_form mb-2",children:(0,l.jsx)("input",{type:"text",defaultValue:ef.contentValue,className:"inputurl",placeholder:(0,n.Iu)("youtubeUrlLbl"),onChange:e=>el(e.target.value),required:!0})}):null,eu?(0,l.jsx)("div",{className:"input_form mb-2",children:(0,l.jsx)("input",{type:"text",className:"inputurl",defaultValue:ef.contentValue,placeholder:(0,n.Iu)("otherUrlLbl"),onChange:e=>el(e.target.value)})}):null,W?(0,l.jsxs)("div",{className:"input_form mb-2 video_url",children:["video_upload"===ea.content_type?(0,l.jsxs)("div",{className:"preview",onClick:()=>ex(ea.content_value),children:[(0,n.Iu)("previewLbl"),(0,l.jsx)(T.mz0,{})]}):null,(0,l.jsx)("input",{type:"file",id:"videoInput",name:"video",accept:"video/*",onChange:e=>eI(e)}),(0,l.jsxs)("label",{htmlFor:"videoInput",children:[" ",(0,n.Iu)("uploadVideoLbl"),(0,l.jsx)(c.aBR,{className:"uploadVideo"})]}),(0,l.jsx)("input",{type:"file",className:"form-control",id:"videoInput",name:"video",accept:"video/*",placeholder:"Upload File",disabled:!0,hidden:!0})]}):null,(0,l.jsx)("div",{className:"dropdown_form mb-2",children:(0,l.jsx)(y.default,{mode:"multiple",style:{width:"100%"},defaultValue:null==ef?void 0:ef.tagValue,placeholder:(0,n.Iu)("tagLbl"),onChange:e=>eU(e),optionLabelProp:"label",children:eD&&eD.map((e,a)=>(0,l.jsx)(F,{value:e.tag_name,label:e.tag_name,children:(0,l.jsx)(b.Z,{children:e.tag_name})},a))})}),(0,l.jsxs)("div",{className:"show_date mb-2",children:[(0,l.jsx)(u(),{dateFormat:"yyyy-MM-dd",selected:ef.dateValue,placeholderText:(0,n.Iu)("showTilledDate"),clearButtonTitle:!0,todayButton:"Today",minDate:new Date,onChange:e=>ev(e)}),(0,l.jsx)(m.jDB,{className:"form-calender"})]}),(0,l.jsxs)("div",{className:"main_image mb-2",children:[(0,l.jsx)("input",{type:"file",name:"image",id:"file",className:"file_upload",onChange:e=>eq(e)}),(0,l.jsxs)("label",{htmlFor:"file",children:[" ",(0,l.jsxs)("em",{children:[ef.imagedefault?null:(0,l.jsx)(c.MbD,{})," ",ef.imagedefault?null:(0,n.Iu)("uploadMainImageLbl")]})]}),k&&(0,l.jsx)("div",{className:"mainimage",children:(0,l.jsx)("img",{src:k&&k,onClick:()=>document.getElementById("file").click(),alt:"edit news"})}),ef.imagedefault&&(0,l.jsx)("div",{className:"mainimage",children:(0,l.jsx)("img",{src:ef.imagedefault,onClick:()=>document.getElementById("file").click(),alt:"edit news"})}),(0,l.jsx)("input",{type:"text",className:"form-control",placeholder:"Upload File",id:"file1",name:"myfile",disabled:!0,hidden:!0})]}),(0,l.jsx)("div",{className:"other_image mb-2",children:(0,l.jsx)(v.ZP,{onDrop:e=>{let a=e.filter(e=>e.type.startsWith("image/"));if(e.length!==a.length){q.ZP.error("Only image files are allowed.");return}J([...z,...e])},multiple:!0,children:e=>{let{getRootProps:a,getInputProps:t}=e;return(0,l.jsxs)("div",{...a(),className:"dropzone",children:[(0,l.jsx)("input",{...t(),className:""}),(0,l.jsx)(c.MbD,{className:"me-1"})," ",(0,n.Iu)("uploadOtherImageLbl")]})}})}),(0,l.jsx)("div",{className:"image_slider",children:(0,l.jsxs)(_.tq,{loop:!1,speed:750,spaceBetween:10,slidesPerView:3.5,navigation:!1,autoplay:!1,breakpoints:{0:{slidesPerView:2.5},768:{slidesPerView:2.5},992:{slidesPerView:3},1200:{slidesPerView:3.5}},children:[null==ef?void 0:null===(o=ef.multipleImage)||void 0===o?void 0:o.map((e,a)=>(0,l.jsxs)(_.o5,{children:[(0,l.jsx)("img",{src:e.other_image,alt:"Uploaded ".concat(a),className:"all_images"}),(0,l.jsx)("button",{onClick:a=>eB(a,e.id),className:"close-btn",children:(0,l.jsx)(Z.j7p,{})})]},a)),z.map((e,a)=>(0,l.jsx)(_.o5,{children:(0,l.jsx)("img",{src:URL.createObjectURL(e),alt:"Uploaded ".concat(a)})},a))]})}),(0,l.jsx)(r.Z,{type:"submit",className:"btn btn-secondary next-btn",children:(0,n.Iu)("nxt")})]})]})})]})}),(0,l.jsx)(N.Z,{show:$,onHide:()=>G(!1),keyboard:!1,url:Q,type_url:ea.content_type})]})]})}},98569:function(e,a,t){t.d(a,{Z:function(){return p}});var l=t(85893),s=t(67294),i=t(76529),n=t(98695),d=t(22004),r=t.n(d),o=t(15411),u=t(93041),c=s.memo(e=>{let a=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let t=a.current,l=new u.ZP,s=e.url;return l.loadSource(s),l.attachMedia(t),l.on(u.ZP.Events.MANIFEST_PARSED,()=>{t.play()}),()=>{l.destroy()}},[]),(0,l.jsx)("video",{className:"videoCanvas",ref:a,autoPlay:!0})}),m=t(73680),p=e=>{let a;let[t,d]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{d(!0);let e=setTimeout(()=>{d(!1)},2e3);return()=>clearTimeout(e)},[e.show]),(0,l.jsx)(n.Z,{...e,className:"video_modal",size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:(0,l.jsx)(n.Z.Body,{id:"vps-modal-body",children:t?(0,l.jsx)("div",{className:"loader-container",children:(0,l.jsx)("div",{className:"loader"})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.Z,{id:"vps-modal-btnclose",onClick:e.onHide,children:(0,l.jsx)(o.oHP,{id:"btnClose-logo",size:20})}),(null==(a=e.url)?void 0:a.endsWith(".m3u8"))?(0,l.jsx)(c,{url:e.url}):"video_other"===e.type_url||"url_other"===e.type_url?(0,l.jsx)("iframe",{className:"video_other_url",allow:"autoplay",frameborder:"0",width:"100%",allowFullScreen:!0,src:e.url,onError:m.jM}):(0,l.jsx)(r(),{width:"100%",height:"500px",url:e.url&&e.url,controls:!0})]})})})}}}]);