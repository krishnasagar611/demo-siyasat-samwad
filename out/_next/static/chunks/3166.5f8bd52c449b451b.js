"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3166],{58326:function(e,t,a){var r=a(87066),i=a(28345);let s=r.Z.create({baseURL:"".concat("https://devserver.siyasatsamwad.com","/").concat("api","/")});s.interceptors.request.use(function(e){var t,a,r;let s;return(s=null===(r=i.h.getState())||void 0===r?void 0:null===(a=r.user)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.token)&&(e.headers.authorization="Bearer ".concat(s)),e}),t.Z=s},13166:function(e,t,a){a.r(t),a.d(t,{default:function(){return L}});var r=a(85893),i=a(67294),s=a(81426),l=a(9473),n=a(51527),o=a(11163),d=a(56923),c=a(39332),u=a(71911);a(30719),a(35609);var v=a(73680),h=a(41664),g=a.n(h),m=a(81823);a(64503),a(99131);var p=a(51833),f=a(3483);u.ZP.use([u.W_,u.tl]);var x=a(86501);a(39148);var j=a(18483),N=a(28345),w=a(15411),b=()=>{var e,t;let[a,o]=(0,i.useState)([]),[d,u]=(0,i.useState)(null),[h,f]=(0,i.useState)(5),x=(0,l.v9)(e=>e.clickAction.searchPopUp),{id:b}=(0,m.G3)(),y=(0,m.B4)(),[k,E]=(0,i.useState)(""),_=(0,l.v9)(s.zd),Z=_&&_.lat,S=_&&_.long,C=(0,l.v9)(n.Aj);(0,c.useRouter)();let L=(0,l.I0)(),B=async()=>{(0,p.Hs)({offset:"0",limit:h.toString(),user_id:y,search:k,language_id:b,latitude:Z,longitude:S,onSuccess:e=>{L((0,p.q2)(C.id));let t=parseInt(e.total),a=e.length+parseInt(h);e.error&&(o([]),u(0)),a>t?o([]):""!==k?(u(e.total),o(e)):o([])},onError:e=>{console.log(e)}})};return(0,i.useEffect)(()=>{if(k){let e=setTimeout(()=>{B()},1500);return()=>{clearTimeout(e)}}},[h,k]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:x?"body-overlay active":"body-overlay",id:"body-overlay",onClick:()=>{N.h.dispatch((0,j.g4)(!x)),E("")}}),(0,r.jsx)("div",{className:x?"td-search-popup active":"td-search-popup",id:"td-search-popup",children:(0,r.jsxs)("div",{className:"search-form",children:[(0,r.jsx)("div",{className:"form-group",children:(0,r.jsx)("input",{type:"text",className:"form-control",placeholder:"Search.....",value:k,onChange:e=>{E(e.target.value)}})}),(0,r.jsx)("button",{type:"submit",className:"submit-btn",onClick:()=>E(""),children:(0,r.jsx)(w.oHP,{})}),(0,r.jsx)("div",{id:"ts-main",className:"search_bar",style:{height:d<3||a&&(null==a?void 0:a.error)===!0||""===k?"auto":"500px",overflowY:d<3||a&&d>3&&(null==a?void 0:a.error)===!0||""===k?"visible":"scroll"},children:(0,r.jsx)("div",{id:"ts-content",className:"",children:(0,r.jsxs)("div",{className:"row mx-auto",children:[""!==k&&a&&(null===(e=a.data)||void 0===e?void 0:e.length)>0&&a.data.map(e=>(0,r.jsx)("div",{className:"col-12 px-0",children:(0,r.jsx)(g(),{id:"Link-all",href:{pathname:"/news/".concat(e.slug),query:{language_id:e.language_id}},as:"/news/".concat(e.slug),children:(0,r.jsxs)("div",{id:"ts-card",className:"card",children:[(0,r.jsx)("img",{id:"ts-card-image",src:e.image,className:"card-img",alt:e.title}),(0,r.jsx)("div",{id:"ts-card-body",className:"card-body",children:(0,r.jsx)("h5",{id:"ts-card-title",className:"card-title",children:(0,v.aF)(e.title,150)})})]})})},e.id)),""!==k&&(null==a?void 0:null===(t=a.data)||void 0===t?void 0:t.length)>0&&(0,r.jsx)("div",{className:"load-more-btn text-center",style:{padding:d<3||a&&(null==a?void 0:a.error)==="true"||""===k?"0px":"15px"},children:a&&(null==a?void 0:a.data.length)<parseInt(d)&&(0,r.jsx)("button",{onClick:()=>{f(e=>e+h)},children:"Load More"})}),a&&(null==a?void 0:a.error)==="true"&&(0,r.jsx)("p",{className:"text-dark bg-white p-4 text-center",children:"No data found"})]})})})]})})]})},y=a(62145);let k=["/bookmark","/create-news","/edit-news","/manage-news","/user-based-categories","/personal-notification","/profile-update"];var E=a(30109);a(30143);var _=a(58326);let Z={getLiveStreaming:e=>{let{language_id:t,offset:a,limit:r}=e;return _.Z.get(m.Ku,{params:{language_id:t,offset:a,limit:r}})}};var S=a(11061),C=a(59544),L=e=>{var t,a;let{children:u}=e,v=(0,l.v9)(s.vV),h=(0,l.v9)(E.dy),g=(0,o.useRouter)(),m=(0,c.usePathname)(),p=(0,l.v9)(S.EK),j=p.data.isLiveNewsApiCallOnce,N=p.data.isBreakingNewsApiCallOnce,w=(0,l.I0)();(0,l.v9)(n.$i);let _=(0,l.v9)(n.Aj);(0,i.useEffect)(()=>{(0,s.XB)({onSuccess:e=>{},onError:e=>{console.log(e)}})},[]),(0,i.useEffect)(()=>{g.pathname&&g.replace(window.location.pathname+window.location.search)},[]),(0,i.useEffect)(()=>{var e;document.documentElement.style.setProperty("--primary-color",v&&(null==v?void 0:null===(e=v.web_setting)||void 0===e?void 0:e.web_color_code))},[v]);let L=h&&(null==h?void 0:null===(t=h.data)||void 0===t?void 0:t.token),B=k.includes(m);(0,i.useEffect)(()=>{F()},[B]);let F=()=>{if(B&&void 0===L){g.push("/"),x.ZP.error("please login first");return}};(0,i.useEffect)(()=>{(null==_?void 0:_.id)&&(0,f.Uy)({offset:"0",limit:"15",language_id:null==_?void 0:_.id,onSuccess:e=>{w((0,f.Fh)(_.id))},onErro:e=>{console.log("error",e),w((0,f.Fh)(""))}})},[_]);let P=()=>{var e;if(!(null===(e=h.data)||void 0===e?void 0:e.firebase_id))return!1;(0,E.Sq)({onSuccess:e=>e&&0===e.data.status?(x.ZP.error("You are deactivated by admin!"),signOut(authentication).then(()=>{logoutUser(),navigate.push("/")}).catch(e=>{x.ZP.error(e)}),!1):e&&e.data?(e.data.role,e.data):[],onError:e=>{console.log(e)}})};(0,i.useEffect)(()=>{P()},[_,null===(a=h.data)||void 0===a?void 0:a.firebase_id]),(0,i.useEffect)(()=>{let e=e=>{e.preventDefault()};return document.addEventListener("copy",e),()=>{document.removeEventListener("copy",e)}},[]);let A=async()=>{try{var e;let{data:t}=await Z.getLiveStreaming({language_id:_.id});return w((0,S.Mn)({data:{liveNewsDataFound:(null===(e=t.data)||void 0===e?void 0:e.length)>0,isLiveNewsApiCallOnce:!0}})),t.data}catch(e){console.log(e)}},I=async()=>{try{var e;let{data:t}=await C.w.getBreakingNews({language_id:_.id});return w((0,S.pD)({data:{breakingNewsDataFound:(null===(e=t.data)||void 0===e?void 0:e.length)>0,isBreakingNewsApiCallOnce:!0}})),t.data}catch(e){console.log(e)}};return(0,i.useEffect)(()=>{(null==_?void 0:_.id)&&!j&&!N&&(A(),I())},[_]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b,{}),(0,r.jsx)(d.Z,{}),(0,r.jsx)("div",{children:u}),(0,r.jsx)(y.Z,{})]})})}},99131:function(e,t,a){var r=a(85893);a(67294);var i=a(50549);t.Z=e=>{let{catNav:t}=e;return(0,r.jsxs)("div",{className:"card is-loading mb-4 border-0",children:[(0,r.jsx)("div",{className:"image",children:(0,r.jsx)(i.Z,{height:t?105:200})}),(0,r.jsxs)("div",{className:"content",children:[(0,r.jsx)("h2",{children:(0,r.jsx)(i.Z,{height:20,count:1})}),(0,r.jsx)("p",{children:(0,r.jsx)(i.Z,{height:15,count:3})})]})]})}},59544:function(e,t,a){a.d(t,{w:function(){return s}});var r=a(58326),i=a(81823);let s={getBreakingNews:e=>{let{language_id:t,slug:a,offset:s,limit:l}=e;return r.Z.get(i.Nc,{params:{language_id:t,slug:a,offset:s,limit:l}})},setBreakingNewsView:e=>{let{user_id:t,breaking_news_id:a}=e;return r.Z.post(i.NX,{user_id:t,breaking_news_id:a})}}}}]);